@using  System.Globalization
@inject NavigationManager Nav
@inject ClientPreferenceService ClientPreferenceService


<MudMenu Icon="@Icons.Material.Outlined.Language" Color="Color.Inherit" Direction="Direction.Bottom" OffsetY="true" Dense="true">
    @foreach (var language in supportedCultures)
    {
        <MudMenuItem OnClick="(()=> ChangeLanguage(language))">@language.DisplayName</MudMenuItem>
    }
</MudMenu>

@code
{
    private CultureInfo[] supportedCultures = new[]
    {
        new CultureInfo("en-US"),
        new CultureInfo("nl-NL"),
    };

    private CultureInfo Culture
    {
        get => CultureInfo.CurrentCulture;
    }

    private void ChangeLanguage(CultureInfo culture)
    {
        if (CultureInfo.CurrentCulture != culture)
        {
            ClientPreferenceService.SetCulture(culture.Name);
            Nav.NavigateTo(Nav.Uri, forceLoad: true);
        }
    }
}